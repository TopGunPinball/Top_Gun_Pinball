#config_version=6

mode_settings:
  selectable_items:
    - title
    - presented_by
    - hotrod_pinball_logo
    - mpf_logo
    - credits
    - last_scores_1p{machine.player1_score and not machine.player2_score}
    - last_scores_2p{machine.player2_score and not machine.player3_score}
    - last_scores_3p{machine.player3_score and not machine.player4_score}
    - last_scores_4p{machine.player4_score}
  next_item_events: s_flipper_right_active, timer_attract_carousel_timer_complete
  previous_item_events: s_flipper_left_active

slide_player:
  mode_attract_started: attract

sound_player:
  mode_attract_started:
    top_gun_pinball_attract_scene_music:
      bus: music

# Kick off the chained cycle
event_player:
  mode_attract_started: attract_cycle_step1

show_player:
  # Step 1: rainbow_breathe three times, then go to step 2
  attract_cycle_step1:
    rainbow_breathe:
      loops: 3
      speed: 1
      priority: 200
      events_when_completed: attract_cycle_step2

  # Step 2: spinner (your "blink_shoot_again") three times, then step 3
  attract_cycle_step2:
    blink_shoot_again:
      loops: 3
      speed: 5
      priority: 200
      events_when_completed: attract_cycle_step3

  # Step 3: wave (your "output1") three times, then back to step 1
  attract_cycle_step3:
    output1:
      loops: 3
      speed: 5
      priority: 200
      events_when_completed: attract_cycle_step1

  # Stop anything still running when attract stops
  mode_attract_stopping:
    rainbow_breathe: stop
    blink_shoot_again: stop
    output1: stop

timers:
  attract_carousel_timer:
    end_value: 1
    tick_interval: 7s
    start_running: true
    control_events:
      - event: item_highlighted
        action: restart
      - event: flipper_cradle
        action: stop
      - event: flipper_cradle_release
        action: restart
