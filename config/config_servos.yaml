#config_version=6

####################################################################################
# SERVO CONFIGURATION - DS3218 Digital Servos
# FAST FP-EXP-0071 expansion board (6V servo power)
#
# DS3218 Specs:
#   - Operating frequency: 50-330Hz (FAST board uses 50Hz) ✔
#   - Pulse width: 500-2500µs
#   - Neutral: 1500µs
#   - Travel: 180° over full pulse range
#
# Port Assignments:
#   Port 1: Right Ramp Lifter
#   Port 2: Top/Inner Ramp Lifter (REVERSED direction)
#   Port 4: Lock Release Servo (REVERSED - 0.28=held, 0.51=released)
#
# POSITION MATH:
#   180° over 0.0-1.0 range = 180° per 1.0 position change
#   For 20° of travel: 20/180 = 0.111 position difference
#   Using ~0.1 difference between down and up positions
####################################################################################

servos:
  ##############################################
  # RIGHT RAMP LIFTER SERVO - Port 1
  # Travel: ~25 degrees (0.42 to 0.56)
  # Reverted to initial + slightly more travel
  ##############################################
  servo_right_ramp_lifter:
    number: light_expansion_board-1
    servo_min: 0.0
    servo_max: 1.0
    reset_position: 0.40
    reset_events: machine_reset_phase_3
    positions:
      0.40: right_ramp_down
      0.60: right_ramp_up
    platform_settings:
      min_us: 500
      home_us: 1500
      max_us: 2500

  ##############################################
  # TOP/INNER RAMP LIFTER SERVO - Port 2
  # REVERSED: Higher value = down, Lower value = up
  # Travel: ~16 degrees (0.6 to 0.51)
  ##############################################
  servo_top_ramp_lifter:
    number: light_expansion_board-2
    servo_min: 0.0
    servo_max: 1.0
    reset_position: 0.59
    reset_events: machine_reset_phase_3
    positions:
      0.59: top_ramp_down
      0.5: top_ramp_up
    platform_settings:
      min_us: 500
      home_us: 1500
      max_us: 2500

  ##############################################
  # LOCK RELEASE SERVO - Port 4
  # Travel: ~42 degrees (0.28 to 0.51)
  ##############################################
  servo_lock_release:
    number: light_expansion_board-4
    servo_min: 0.0
    servo_max: 1.0
    reset_position: 0.51
    reset_events: machine_reset_phase_3
    positions:
      0.28: lock_held
      0.51: lock_released
    platform_settings:
      min_us: 500
      home_us: 1500
      max_us: 2500

####################################################################################
# CALIBRATION GUIDE:
#
# Current settings give ~20° of travel (0.11 position difference)
# 
# To INCREASE travel (more lift):
#   - Increase the "up" value: 0.51 -> 0.62 (30°) -> 0.73 (40°)
#   - Or decrease the "down" value
#
# To DECREASE travel (less lift):
#   - Decrease the "up" value: 0.51 -> 0.46 (10°)
#
# To SHIFT the range (if hitting mechanical limits):
#   - Move both values together: 0.4/0.51 -> 0.3/0.41 or 0.5/0.61
#
# POSITION REFERENCE (degrees from center):
#   0.0 = -90° (full one direction)
#   0.25 = -45°
#   0.4 = -18° (current down)
#   0.5 = 0° (center)
#   0.51 = +2° (current up, ~20° from down)
#   0.6 = +18°
#   0.75 = +45°
#   1.0 = +90° (full other direction)
#
# Quick adjustment: Each 0.055 = ~10° of travel
####################################################################################